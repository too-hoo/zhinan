{% extends "base.html" %}

{% block content %}
<div class="container py-5">
    <div class="row">
        <div class="col-md-4 mb-4">
            <div class="card border-0 shadow-sm text-center p-4 rounded-4">
                <div class="mb-3">
                    <span style="font-size: 4rem;">ğŸ‘¤</span>
                </div>
                <h4 class="fw-bold">{{ current_user.username }}</h4>
                <p class="text-muted small">åŠ å…¥æ—¶é—´ï¼š{{ current_user.created_at.strftime('%Y-%m-%d') if current_user.created_at else 'æ—©æœŸæˆå‘˜' }}</p>
                
                <hr>
                
                <div class="mb-3">
                    <label class="small text-uppercase fw-bold text-muted d-block mb-2">è´¦å·æƒé™</label>
                    {% if current_user.is_paid %}
                        <span class="badge bg-success-subtle text-success px-3 py-2 rounded-pill">æ ¸å¿ƒä»˜è´¹æˆå‘˜</span>
                    {% else %}
                        <span class="badge bg-secondary-subtle text-secondary px-3 py-2 rounded-pill">æ™®é€šæ¸¸å®¢</span>
                        <div class="mt-3">
                            <a href="{{ url_for('auth.activate') }}" class="btn btn-sm btn-purple w-100 rounded-pill">è¾“å…¥æ¿€æ´»ç å‡çº§</a>
                        </div>
                    {% endif %}
                </div>
                <div class="mt-4">
                    <a href="{{ url_for('main.submit_feedback') }}" class="btn btn-outline-purple w-100 rounded-pill py-2 border-dashed">
                        ğŸ’¡ æ„è§åé¦ˆ
                    </a>
                </div>
            </div>
        </div>
        <div class="col-md-8">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h4 class="fw-bold mb-0">ğŸŒŸ æˆ‘çš„ä¸“å±æ”¶è— ({{ favorites|length }})</h4>
                <a href="{{ url_for('content.list_guides') }}" class="btn btn-sm btn-outline-primary rounded-pill">å‘ç°æ›´å¤šæŒ‡å—</a>
            </div>

            {% if favorites %}
                <div class="row g-4">
                    {% for guide in favorites %}
                    <div class="col-md-6">
                        <div class="card h-100 border-0 shadow-sm hover-up rounded-4 overflow-hidden">
                            {% if guide.cover_image_url %}
                            <img src="{{ guide.cover_image_url }}" class="card-img-top" style="height: 160px; object-fit: cover;">
                            {% endif %}
                            <div class="card-body p-3">
                                <div class="badge bg-primary-subtle text-primary mb-2 small">{{ guide.category.name if guide.category else 'æœªåˆ†ç±»' }}</div>
                                <h6 class="fw-bold mb-2">{{ guide.title }}</h6>
                                <p class="text-muted small text-truncate-2 mb-3">{{ guide.summary }}</p>
                                <a href="{{ url_for('content.show_guide', guide_id=guide.id) }}" class="stretched-link"></a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="card border-0 shadow-sm text-center py-5 rounded-4 bg-white">
                    <div class="py-4">
                        <span style="font-size: 3rem;">ğŸ®</span>
                        <p class="mt-3 text-muted">ä½ çš„æ”¶è—å¤¹ç©ºç©ºå¦‚ä¹Ÿï¼Œå»æŒ‡å—åº“æ‰¾æ‰¾çµæ„Ÿå§</p>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
</div>

<style>
    .hover-up:hover { transform: translateY(-5px); transition: 0.3s; }
    .text-truncate-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
    .btn-purple { background-color: #6f42c1; color: white; }
    .btn-purple:hover { background-color: #5a32a3; color: white; }
</style>
<style>
    /* å¢åŠ ä¸€ä¸ªè™šçº¿è¾¹æ¡†æ•ˆæœï¼Œæ˜¾å¾—è½»ç›ˆä¸”æœ‰å¼•å¯¼æ€§ */
    .border-dashed {
        border-style: dashed !important;
        border-width: 2px !important;
    }
    .btn-outline-purple {
        color: #6f42c1;
        border-color: #6f42c1;
    }
    .btn-outline-purple:hover {
        background-color: #f3e8ff;
        color: #5a32a3;
    }
</style>
{% endblock %}